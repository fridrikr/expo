#!/bin/bash


# iOS

pushd bundle
npx react-native bundle --platform ios --dev false --entry-file index.js --bundle-output devclient.ios.bundle
popd

tee > ios/EXDevelopmentClientBundle.cpp <<EOF
// NOTE: Autogenerated using 'bundle/write_embedded_bundle.sh' in 'expo-development-client' package

#include "EXDevelopmentClientBundle.h"
const unsigned int EXDevelopmentClientBundleLength = $(wc -c < bundle/devclient.ios.bundle) + 2;
const char *EXDevelopmentClientBundle = R"DELIM(
$(cat bundle/devclient.ios.bundle)





)DELIM";
EOF

rm bundle/devclient.ios.bundle


# Android

pushd bundle
npx react-native bundle --platform android --dev false --entry-file index.js --bundle-output devclient.android.bundle
popd

mv bundle/devclient.android.bundle android/src/main/res/raw/expo_development_client_android.bundle



